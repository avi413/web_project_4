!function(){"use strict";function e(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class t{constructor(t,n,s){e(this,"_handleLikeBtn",(()=>{this._element.querySelector(".gallery__item-like-btn").classList.toggle("gallery__item-like-btn_active")})),e(this,"_handleDeleteGalleryCardItem",(()=>{this._element.remove(),this._element=null})),this._text=t.name,this._img=t.link,this._cardSelector=n,this._handleCardClick=s}_getTemplate(){return document.querySelector(this._cardSelector).content.querySelector(".gallery__item").cloneNode(!0)}generateCard(){return this._element=this._getTemplate(),this._element.querySelector(".gallery__item-img").src=this._img,this._element.querySelector(".gallery__item-name").textContent=this._text,this._setEventListeners(),this._element}_setEventListeners(){this._element.querySelector(".gallery__item-like-btn").addEventListener("click",this._handleLikeBtn),this._element.querySelector(".gallery__item-trash-btn").addEventListener("click",this._handleDeleteGalleryCardItem),this._element.querySelector(".gallery__item-img").addEventListener("click",this._handleCardClick)}}function n(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class s{constructor(e){n(this,"_handleEscClose",(e=>{"Escape"===e.key&&document.querySelector(".popup_opened")&&this.close()})),n(this,"_handleClickClosePopup",(e=>{(e.target.classList.contains("popup_opened")||e.target.classList.contains("popup__close"))&&this.close()})),this._popup=document.querySelector(e)}close(){this._popup.classList.remove("popup_opened"),this.removeEventListeners()}open(){this._popup.classList.add("popup_opened"),this.setEventListeners()}setEventListeners(){document.addEventListener("keydown",this._handleEscClose),document.addEventListener("mousedown",this._handleClickClosePopup)}removeEventListeners(){document.removeEventListener("keydown",this._handleEscClose),document.removeEventListener("mousedown",this._handleClickClosePopup)}}class r extends s{constructor(e,t){var n,s;super(e),s=e=>{e.preventDefault();const t=this._getInputValues();this._formSubmit(t),this.close()},(n="_handleProfileFormSubmit")in this?Object.defineProperty(this,n,{value:s,enumerable:!0,configurable:!0,writable:!0}):this[n]=s,this._formSubmit=t,this._formElemet=this._popup.querySelector(".popup__form")}_getInputValues(){const e={};return this._formElemet.querySelectorAll(".popup__input").forEach((t=>{e[t.name]=[t.value]})),e}setEventListeners(){super.setEventListeners(),this._formElemet.addEventListener("submit",this._handleProfileFormSubmit)}close(){super.close(),this._formElemet.reset()}}class i extends s{constructor(e,t){let{src:n,title:s}=e;super(t),this._src=n,this._title=s}open(){super.open(),this._popup.querySelector(".popup__img").src=this._src,this._popup.querySelector(".popup__img").alt=this._title,this._popup.querySelector(".popup__img-title").textContent="Photo of ".concat(this._title)}}class o{constructor(e,t){this._formSelector=e.formSelector,this._formInputsFieldSet=e.formInputsFieldSet,this._inputSelector=e.inputSelector,this._submitBtnSelector=e.submitBtnSelector,this._inactiveBtnClass=e.inactiveBtnClass,this._inputErrClass=e.inputErrClass,this._inputErrActiveClass=e.inputErrActiveClass,this._formEl=document.querySelector(t)}_showInputErr(e){const t=this._formEl.querySelector(".".concat(e.id,"-error"));e.classList.add(this._inputErrClass),t.textContent=e.validationMessage,t.classList.add(this._inputErrActiveClass)}_hideInputError(e){const t=this._formEl.querySelector(".".concat(e.id,"-error"));e.classList.remove(this._inputErrClass),t.classList.remove(this._inputErrActiveClass),t.textContent=""}_checkInputValidity(e){e.validity.valid?this._hideInputError(e):this._showInputErr(e)}_hasInvalidInput(e){return e.some((e=>!e.validity.valid))}toggleButtonState(){const e=Array.from(this._formEl.querySelectorAll(this._inputSelector)),t=this._formEl.querySelector(this._submitBtnSelector);this._hasInvalidInput(e)?(t.classList.add(this._inactiveBtnClass),t.disabled=!0):(t.classList.remove(this._inactiveBtnClass),t.disabled=!1)}_setEventListeners(){const e=Array.from(this._formEl.querySelectorAll(this._inputSelector)),t=this._formEl.querySelector(this._submitBtnSelector);this.toggleButtonState(e,t),e.forEach((n=>{n.addEventListener("input",(()=>{this._checkInputValidity(n),this.toggleButtonState(e,t)}))}))}enableValidation(){this._setEventListeners(),this._formEl.addEventListener("submit",(e=>e.preventDefault()))}}const l={formSelector:".popup__form",formInputsFieldSet:".popup__form-set",inputSelector:".popup__input",submitBtnSelector:".popup__submit-btn",inactiveBtnClass:"button_inactive",inputErrClass:"popup__input-text_type_error",inputErrActiveClass:"popup__input-text-error_active"},a=document.querySelector("button.profile__edit-btn"),c=document.querySelector("button.profile__add-btn"),u=(document.querySelector(".profile__name"),document.querySelector(".profile__about-me"),document.querySelector(".gallery").querySelector(".gallery__list")),p=document.forms.profileform,_=p.elements.profileName,m=p.elements.profileAboutMe,d=document.forms.placeform,h=new class{constructor(e,t){let{data:n,renderer:s}=e;this._items=n,this._renderer=s,this._container=t}addItem(e){this._container.append(e)}renderer(){this._items.forEach((e=>{this._renderer(e)}))}}({data:[{name:"Yosemite Valley",link:"https://code.s3.yandex.net/web-code/yosemite.jpg"},{name:"Lake Louise",link:"https://code.s3.yandex.net/web-code/lake-louise.jpg"},{name:"Bald Mountains",link:"https://code.s3.yandex.net/web-code/bald-mountains.jpg"},{name:"Latemar",link:"https://code.s3.yandex.net/web-code/latemar.jpg"},{name:"Vanoise National Park",link:"https://code.s3.yandex.net/web-code/vanoise.jpg"},{name:"Lago di Braies",link:"https://code.s3.yandex.net/web-code/lago.jpg"}],renderer:y},u);function y(e){const n=new t(e,"#gallery-item-template",(()=>{new i({src:e.link,title:e.name},".popup_type_img").open()})).generateCard();h.addItem(n)}const f=new r(".popup_type_new-card",(function(e){y({link:e.placeImageLink,name:e.placeName}),d.reset(),f.close(),b.toggleButtonState()}));c.addEventListener("click",(()=>f.open()));const v=new class{constructor(e,t){this._nameElement=document.querySelector(e),this._jobElement=document.querySelector(t)}getUserInfo(){return{name:this._nameElement.textContent,job:this._jobElement.textContent}}setUserInfo(e){let{name:t,job:n}=e;this._nameElement.textContent=t,this._jobElement.textContent=n}}(".profile__name",".profile__about-me"),E=new r(".popup_type_profile",(function(e){v.setUserInfo({name:e.profileName,job:e.profileAboutMe}),S.toggleButtonState()}));a.addEventListener("click",(()=>{const{name:e,job:t}=v.getUserInfo();_.value=e,m.value=t,E.open()}));const b=new o(l,".popup__form_type_new-card");b.enableValidation();const S=new o(l,".popup__form_type_profile");S.enableValidation(),h.renderer()}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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SDFILEtBQU1QLEtBQUsrSCxhQUFhN0csWUFDeEJnSCxJQUFLbEksS0FBS2dJLFlBQVk5RyxhQUk5QmlILFlBQVksR0FBWSxJQUFaLEtBQUM1SCxFQUFELElBQU8ySCxHQUFLLEVBSXBCbEksS0FBSytILGFBQWE3RyxZQUFjWCxFQUNoQ1AsS0FBS2dJLFlBQVk5RyxZQUFjZ0gsSUZtQlIsaUJBQWlCLHNCQUUxQ0UsRUFBZSxJQUFJOUYsRUFDdkIsdUJBSUYsU0FBa0NJLEdBQ2hDa0YsRUFBU08sWUFBWSxDQUFDNUgsS0FBTW1DLEVBQU80RCxZQUFhNEIsSUFBS3hGLEVBQU84RCxpQkFDNUQ2QixFQUFpQjdDLHVCQUduQjhCLEVBQUFBLGlCQUEwQyxTQUFTLEtBQ2pELE1BQU0sS0FBQy9HLEVBQUQsSUFBTzJILEdBQVFOLEVBQVNLLGNBQzlCWCxFQUFBQSxNQUE2Qi9HLEVBQzdCK0csRUFBQUEsTUFBZ0NZLEVBQ2hDRSxFQUFhcEcsVUFPZixNQUFNMkYsRUFBbUIsSUFBSWpFLEVBQWM0RCxFQUFpQiw4QkFDNURLLEVBQWlCOUIsbUJBRWpCLE1BQU13QyxFQUFtQixJQUFJM0UsRUFBYzRELEVBQWlCLDZCQUM1RGUsRUFBaUJ4QyxtQkFLakJjLEVBQVNFLFciLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2NvbXBvbmVudHMvQ2FyZC5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2NvbXBvbmVudHMvUG9wdXAuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvdXRpbHMvY29uc3RhbnRzLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9jb21wb25lbnRzL1NlY3Rpb24uanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9jb21wb25lbnRzL1VzZXJJbmZvLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBkZWZhdWx0IGNsYXNzIENhcmQge1xyXG4gICAgY29uc3RydWN0b3IoZGF0YSwgY2FyZFNlbGVjdG9yLGhhbmRsZUNhcmRDbGljaykge1xyXG4gICAgICB0aGlzLl90ZXh0ICAgICAgICAgICAgPSBkYXRhLm5hbWU7XHJcbiAgICAgIHRoaXMuX2ltZyAgICAgICAgICAgICA9IGRhdGEubGluaztcclxuICAgICAgdGhpcy5fY2FyZFNlbGVjdG9yICAgID0gY2FyZFNlbGVjdG9yO1xyXG4gICAgICB0aGlzLl9oYW5kbGVDYXJkQ2xpY2sgPSBoYW5kbGVDYXJkQ2xpY2s7XHJcbiAgICB9XHJcbiAgXHJcbiAgICBfZ2V0VGVtcGxhdGUoKSB7XHJcbiAgICAgIGNvbnN0IGNhcmRFbGVtZW50ID0gZG9jdW1lbnRcclxuICAgICAgICAucXVlcnlTZWxlY3Rvcih0aGlzLl9jYXJkU2VsZWN0b3IpXHJcbiAgICAgICAgLmNvbnRlbnRcclxuICAgICAgICAucXVlcnlTZWxlY3RvcihcIi5nYWxsZXJ5X19pdGVtXCIpXHJcbiAgICAgICAgLmNsb25lTm9kZSh0cnVlKTtcclxuICBcclxuICAgICAgcmV0dXJuIGNhcmRFbGVtZW50O1xyXG4gICAgfVxyXG4gIFxyXG4gICAgZ2VuZXJhdGVDYXJkKCkge1xyXG4gICAgICB0aGlzLl9lbGVtZW50ID0gdGhpcy5fZ2V0VGVtcGxhdGUoKTtcclxuICBcclxuICAgICAgdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmdhbGxlcnlfX2l0ZW0taW1nXCIpLnNyYyA9IHRoaXMuX2ltZztcclxuICAgICAgdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmdhbGxlcnlfX2l0ZW0tbmFtZVwiKS50ZXh0Q29udGVudCA9IHRoaXMuX3RleHQ7XHJcbiAgICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgICAgIHJldHVybiB0aGlzLl9lbGVtZW50O1xyXG4gICAgfVxyXG4gIFxyXG4gICAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgICB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZ2FsbGVyeV9faXRlbS1saWtlLWJ0blwiKS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgIHRoaXMuX2hhbmRsZUxpa2VCdG4pO1xyXG4gICAgICB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZ2FsbGVyeV9faXRlbS10cmFzaC1idG5cIikuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsdGhpcy5faGFuZGxlRGVsZXRlR2FsbGVyeUNhcmRJdGVtKTtcclxuICAgICAgdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmdhbGxlcnlfX2l0ZW0taW1nXCIpLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCB0aGlzLl9oYW5kbGVDYXJkQ2xpY2spO1xyXG4gICAgfVxyXG4gIFxyXG4gICAgX2hhbmRsZUxpa2VCdG4gPSAoKSA9PiB7XHJcbiAgICAgIHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5nYWxsZXJ5X19pdGVtLWxpa2UtYnRuXCIpLmNsYXNzTGlzdC50b2dnbGUoJ2dhbGxlcnlfX2l0ZW0tbGlrZS1idG5fYWN0aXZlJyk7XHJcbiAgICB9XHJcbiAgXHJcbiAgICBfaGFuZGxlRGVsZXRlR2FsbGVyeUNhcmRJdGVtID0gKCkgPT4ge1xyXG4gICAgICB0aGlzLl9lbGVtZW50LnJlbW92ZSgpO1xyXG4gICAgICB0aGlzLl9lbGVtZW50ID0gbnVsbDtcclxuICAgICAgXHJcbiAgICB9XHJcbiAgfSIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwIHtcclxuICAgIGNvbnN0cnVjdG9yICggcG9wdXBTZWxlY3RvciApIHtcclxuICAgICAgICB0aGlzLl9wb3B1cCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IocG9wdXBTZWxlY3Rvcik7XHJcbiAgICB9XHJcbiAgICBjbG9zZSgpIHtcclxuICAgICAgICB0aGlzLl9wb3B1cC5jbGFzc0xpc3QucmVtb3ZlKFwicG9wdXBfb3BlbmVkXCIpO1xyXG4gICAgICAgIC8qKiBwb3B1cHMgY2xvc2UgY2xpY2sgcmVtb3ZlIGV2ZW50cyAqL1xyXG4gICAgICAgIHRoaXMucmVtb3ZlRXZlbnRMaXN0ZW5lcnMoKTtcclxuICAgIH1cclxuXHJcbiAgICBvcGVuKCkge1xyXG4gICAgICAgIHRoaXMuX3BvcHVwLmNsYXNzTGlzdC5hZGQoXCJwb3B1cF9vcGVuZWRcIik7XHJcbiAgICAgICAgLyoqIHBvcHVwcyBvcGVuIGV2ZW50cyAqL1xyXG4gICAgICAgIHRoaXMuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICAgIH1cclxuXHJcbiAgICBfaGFuZGxlRXNjQ2xvc2UgPSAoZXZ0KSA9PntcclxuICAgICAgICBpZiAoZXZ0LmtleSA9PT0gXCJFc2NhcGVcIikge1xyXG4gICAgICAgICAgICBjb25zdCBwb3B1cCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfb3BlbmVkXCIpO1xyXG4gICAgICAgICAgICBpZihwb3B1cClcclxuICAgICAgICAgICAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xyXG4gICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZWRvd25cIiwgdGhpcy5faGFuZGxlQ2xpY2tDbG9zZVBvcHVwKTtcclxuICAgIH1cclxuXHJcbiAgICByZW1vdmVFdmVudExpc3RlbmVycygpIHtcclxuICAgICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCAgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xyXG4gICAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJtb3VzZWRvd25cIiwgIHRoaXMuX2hhbmRsZUNsaWNrQ2xvc2VQb3B1cCk7XHJcbiAgICB9XHJcblxyXG4gICAgX2hhbmRsZUNsaWNrQ2xvc2VQb3B1cCA9IChldnQpID0+IHtcclxuICAgICAgICAgICAgaWYgKGV2dC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwicG9wdXBfb3BlbmVkXCIpIHx8XHJcbiAgICAgICAgICAgIGV2dC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwicG9wdXBfX2Nsb3NlXCIpICkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuXHJcbn0iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEZvcm0gIGV4dGVuZHMgUG9wdXAge1xyXG4gICAgICAgIGNvbnN0cnVjdG9yIChwb3B1cFNlbGVjdG9yLCBmb3JtU3VibWl0KSB7XHJcbiAgICAgICAgICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xyXG4gICAgICAgICAgICB0aGlzLl9mb3JtU3VibWl0ICAgID0gICBmb3JtU3VibWl0O1xyXG4gICAgICAgICAgICB0aGlzLl9mb3JtRWxlbWV0ICAgID0gICB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19mb3JtXCIpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgX2dldElucHV0VmFsdWVzKCkge1xyXG4gICAgICAgICAgICBjb25zdCBpbnB1dFZhbHVlcyA9IHt9O1xyXG4gICAgICAgICAgICBjb25zdCBpbnB1dHNBcnIgPSB0aGlzLl9mb3JtRWxlbWV0LnF1ZXJ5U2VsZWN0b3JBbGwoXCIucG9wdXBfX2lucHV0XCIpO1xyXG4gICAgICAgICAgICBpbnB1dHNBcnIuZm9yRWFjaChpbnB1dCA9PiB7XHJcbiAgICAgICAgICAgICAgICBpbnB1dFZhbHVlc1tpbnB1dC5uYW1lXSA9IFtpbnB1dC52YWx1ZV07XHJcbiAgICAgICAgICAgIH0pXHJcblxyXG4gICAgICAgICAgICByZXR1cm4gaW5wdXRWYWx1ZXM7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBzZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIEl0IG1vZGlmaWVzIHRoZSBzZXRFdmVudExpc3RlbmVycygpIHBhcmVudCBtZXRob2QuIFxyXG4gICAgICAgICAgICAgKiBUaGUgc2V0RXZlbnRMaXN0ZW5lcnMoKSBtZXRob2Qgb2YgdGhlIFBvcHVwV2l0aEZvcm0gY2xhc3NcclxuICAgICAgICAgICAgICogIGhhcyB0byBhZGQgdGhlIHN1Ym1pdCBldmVudCBoYW5kbGVyIHRvIHRoZSBmb3JtIGFuZCB0aGUgY2xpY2sgXHJcbiAgICAgICAgICAgICAqIGV2ZW50IGxpc3RlbmVyIHRvIHRoZSBjbG9zZSBpY29uLlxyXG4gICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICAgICAgICAgICAgdGhpcy5fZm9ybUVsZW1ldC5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIHRoaXMuX2hhbmRsZVByb2ZpbGVGb3JtU3VibWl0KTsgXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBfaGFuZGxlUHJvZmlsZUZvcm1TdWJtaXQgPShldnQpID0+e1xyXG4gICAgICAgICAgICBldnQucHJldmVudERlZmF1bHQoKTsgXHJcbiAgICAgICAgICAgIGNvbnN0IGlucHV0cyA9ICB0aGlzLl9nZXRJbnB1dFZhbHVlcygpO1xyXG4gICAgICAgICAgICB0aGlzLl9mb3JtU3VibWl0KGlucHV0cyk7XHJcbiAgICAgICAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgY2xvc2UoKSB7XHJcbiAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgKiBJdCBtb2RpZmllcyB0aGUgY2xvc2UoKSBwYXJlbnQgbWV0aG9kIFxyXG4gICAgICAgICAgICAgKiBpbiBvcmRlciB0byByZXNldCB0aGUgZm9ybSBvbmNlIHRoZSBwb3B1cCBpcyBjbG9zZWQuXHJcbiAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICBzdXBlci5jbG9zZSgpO1xyXG4gICAgICAgICAgICB0aGlzLl9mb3JtRWxlbWV0LnJlc2V0KCk7XHJcbiAgICAgICAgfVxyXG5cclxufSIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoSW1hZ2UgZXh0ZW5kcyBQb3B1cHtcclxuICAgIGNvbnN0cnVjdG9yICh7c3JjICx0aXRsZSB9ICxwb3B1cFNlbGVjdG9yICkge1xyXG4gICAgICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xyXG4gICAgICAgIHRoaXMuX3NyYyA9IHNyYztcclxuICAgICAgICB0aGlzLl90aXRsZSA9IHRpdGxlO1xyXG4gICAgfVxyXG5cclxuICAgIG9wZW4oKSB7XHJcbiAgICAgICAgc3VwZXIub3BlbigpO1xyXG4gICAgICAgIHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2ltZ1wiKS5zcmMgPSAgdGhpcy5fc3JjO1xyXG4gICAgICAgIHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2ltZ1wiKS5hbHQgPSAgdGhpcy5fdGl0bGU7XHJcbiAgICAgICAgdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9faW1nLXRpdGxlXCIpLnRleHRDb250ZW50ID0gYFBob3RvIG9mICR7dGhpcy5fdGl0bGV9YDtcclxuICAgIH1cclxufSIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIEZvcm1WYWxpZGF0b3Ige1xyXG4gICAgY29uc3RydWN0b3IoY29uZmlnLGZvcm1FbCl7XHJcbiAgICAgIHRoaXMuX2Zvcm1TZWxlY3RvciAgICAgICAgID0gY29uZmlnLmZvcm1TZWxlY3RvcjtcclxuICAgICAgdGhpcy5fZm9ybUlucHV0c0ZpZWxkU2V0ICAgPSBjb25maWcuZm9ybUlucHV0c0ZpZWxkU2V0O1xyXG4gICAgICB0aGlzLl9pbnB1dFNlbGVjdG9yICAgICAgICA9IGNvbmZpZy5pbnB1dFNlbGVjdG9yO1xyXG4gICAgICB0aGlzLl9zdWJtaXRCdG5TZWxlY3RvciAgICA9IGNvbmZpZy5zdWJtaXRCdG5TZWxlY3RvcjtcclxuICAgICAgdGhpcy5faW5hY3RpdmVCdG5DbGFzcyAgICAgPSBjb25maWcuaW5hY3RpdmVCdG5DbGFzcztcclxuICAgICAgdGhpcy5faW5wdXRFcnJDbGFzcyAgICAgICAgPSBjb25maWcuaW5wdXRFcnJDbGFzcztcclxuICAgICAgdGhpcy5faW5wdXRFcnJBY3RpdmVDbGFzcyAgPSBjb25maWcuaW5wdXRFcnJBY3RpdmVDbGFzcztcclxuICAgICAgdGhpcy5fZm9ybUVsICAgICAgICAgICAgICAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGZvcm1FbCk7XHJcbiAgICB9XHJcblxyXG4gICAgX3Nob3dJbnB1dEVyciAoaW5wdXRFbCkge1xyXG4gICAgICBjb25zdCBlcnJFbCA9IHRoaXMuX2Zvcm1FbC5xdWVyeVNlbGVjdG9yKGAuJHtpbnB1dEVsLmlkfS1lcnJvcmApO1xyXG4gICAgICBcclxuICAgICAgaW5wdXRFbC5jbGFzc0xpc3QuYWRkKHRoaXMuX2lucHV0RXJyQ2xhc3MpO1xyXG4gICAgICBlcnJFbC50ZXh0Q29udGVudCA9IGlucHV0RWwudmFsaWRhdGlvbk1lc3NhZ2U7XHJcbiAgICAgIGVyckVsLmNsYXNzTGlzdC5hZGQodGhpcy5faW5wdXRFcnJBY3RpdmVDbGFzcyk7XHJcbiAgICB9XHJcblxyXG4gICAgX2hpZGVJbnB1dEVycm9yIChpbnB1dEVsKSB7XHJcbiAgICAgIGNvbnN0IGVyckVsID0gdGhpcy5fZm9ybUVsLnF1ZXJ5U2VsZWN0b3IoYC4ke2lucHV0RWwuaWR9LWVycm9yYCk7XHJcblxyXG4gICAgICBpbnB1dEVsLmNsYXNzTGlzdC5yZW1vdmUodGhpcy5faW5wdXRFcnJDbGFzcyk7XHJcbiAgICAgIGVyckVsLmNsYXNzTGlzdC5yZW1vdmUodGhpcy5faW5wdXRFcnJBY3RpdmVDbGFzcyk7XHJcbiAgICAgIGVyckVsLnRleHRDb250ZW50ID0gXCJcIjtcclxuICAgIH1cclxuXHJcbiAgICBfY2hlY2tJbnB1dFZhbGlkaXR5IChpbnB1dEVsKSB7XHJcbiAgICAgIGlmICghaW5wdXRFbC52YWxpZGl0eS52YWxpZCkge1xyXG4gICAgICAgIHRoaXMuX3Nob3dJbnB1dEVycihpbnB1dEVsKTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dEVsKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIF9oYXNJbnZhbGlkSW5wdXQgKGlucHV0THN0KSB7XHJcbiAgICAgIHJldHVybiBpbnB1dExzdC5zb21lKChpbnB1dEVsKSA9PiAhaW5wdXRFbC52YWxpZGl0eS52YWxpZCk7XHJcbiAgICB9XHJcblxyXG4gICAgdG9nZ2xlQnV0dG9uU3RhdGUgKCkge1xyXG4gICAgICBjb25zdCBpbnB1dExzdCA9IEFycmF5LmZyb20odGhpcy5fZm9ybUVsLnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5faW5wdXRTZWxlY3RvcikpO1xyXG4gICAgICBjb25zdCBidG5FbCA9IHRoaXMuX2Zvcm1FbC5xdWVyeVNlbGVjdG9yKHRoaXMuX3N1Ym1pdEJ0blNlbGVjdG9yKTtcclxuICAgICAgaWYgKHRoaXMuX2hhc0ludmFsaWRJbnB1dChpbnB1dExzdCkpIHtcclxuICAgICAgICBidG5FbC5jbGFzc0xpc3QuYWRkKHRoaXMuX2luYWN0aXZlQnRuQ2xhc3MpO1xyXG4gICAgICAgIGJ0bkVsLmRpc2FibGVkID0gdHJ1ZTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBidG5FbC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2luYWN0aXZlQnRuQ2xhc3MpO1xyXG4gICAgICAgIGJ0bkVsLmRpc2FibGVkID0gZmFsc2U7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBfc2V0RXZlbnRMaXN0ZW5lcnMgKCkge1xyXG4gICAgICBjb25zdCBpbnB1dExzdCA9IEFycmF5LmZyb20odGhpcy5fZm9ybUVsLnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5faW5wdXRTZWxlY3RvcikpO1xyXG4gICAgICBjb25zdCBidG5FbCA9IHRoaXMuX2Zvcm1FbC5xdWVyeVNlbGVjdG9yKHRoaXMuX3N1Ym1pdEJ0blNlbGVjdG9yKTtcclxuICAgICAgdGhpcy50b2dnbGVCdXR0b25TdGF0ZShpbnB1dExzdCwgYnRuRWwpO1xyXG4gICAgICBpbnB1dExzdC5mb3JFYWNoKChpbnB1dEVsKSA9PiB7XHJcbiAgICAgICAgaW5wdXRFbC5hZGRFdmVudExpc3RlbmVyKFwiaW5wdXRcIiwgKCkgPT4geyAgIFxyXG4gICAgICAgICAgdGhpcy5fY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0RWwpO1xyXG4gICAgICAgICAgdGhpcy50b2dnbGVCdXR0b25TdGF0ZShpbnB1dExzdCwgYnRuRWwpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBlbmFibGVWYWxpZGF0aW9uICgpIHtcclxuICAgICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICAgICAgdGhpcy5fZm9ybUVsLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGV2dCkgPT4gZXZ0LnByZXZlbnREZWZhdWx0KCkpO1xyXG4gICAgfVxyXG5cclxuICB9IiwiZXhwb3J0IGNvbnN0IGluaXRpYWxDYXJkcyA9IFtcclxuICAgIHtcclxuICAgICAgbmFtZTogXCJZb3NlbWl0ZSBWYWxsZXlcIixcclxuICAgICAgbGluazogXCJodHRwczovL2NvZGUuczMueWFuZGV4Lm5ldC93ZWItY29kZS95b3NlbWl0ZS5qcGdcIlxyXG4gICAgfSxcclxuICAgIHtcclxuICAgICAgbmFtZTogXCJMYWtlIExvdWlzZVwiLFxyXG4gICAgICBsaW5rOiBcImh0dHBzOi8vY29kZS5zMy55YW5kZXgubmV0L3dlYi1jb2RlL2xha2UtbG91aXNlLmpwZ1wiXHJcbiAgICB9LFxyXG4gICAge1xyXG4gICAgICBuYW1lOiBcIkJhbGQgTW91bnRhaW5zXCIsXHJcbiAgICAgIGxpbms6IFwiaHR0cHM6Ly9jb2RlLnMzLnlhbmRleC5uZXQvd2ViLWNvZGUvYmFsZC1tb3VudGFpbnMuanBnXCJcclxuICAgIH0sXHJcbiAgICB7XHJcbiAgICAgIG5hbWU6IFwiTGF0ZW1hclwiLFxyXG4gICAgICBsaW5rOiBcImh0dHBzOi8vY29kZS5zMy55YW5kZXgubmV0L3dlYi1jb2RlL2xhdGVtYXIuanBnXCJcclxuICAgIH0sXHJcbiAgICB7XHJcbiAgICAgIG5hbWU6IFwiVmFub2lzZSBOYXRpb25hbCBQYXJrXCIsXHJcbiAgICAgIGxpbms6IFwiaHR0cHM6Ly9jb2RlLnMzLnlhbmRleC5uZXQvd2ViLWNvZGUvdmFub2lzZS5qcGdcIlxyXG4gICAgfSxcclxuICAgIHtcclxuICAgICAgbmFtZTogXCJMYWdvIGRpIEJyYWllc1wiLFxyXG4gICAgICBsaW5rOiBcImh0dHBzOi8vY29kZS5zMy55YW5kZXgubmV0L3dlYi1jb2RlL2xhZ28uanBnXCJcclxuICAgIH1cclxuICBdOyBcclxuICBleHBvcnQgY29uc3QgY29uZmlnID0ge1xyXG4gICAgZm9ybVNlbGVjdG9yOiBcIi5wb3B1cF9fZm9ybVwiLFxyXG4gICAgZm9ybUlucHV0c0ZpZWxkU2V0OiBcIi5wb3B1cF9fZm9ybS1zZXRcIixcclxuICAgIGlucHV0U2VsZWN0b3I6IFwiLnBvcHVwX19pbnB1dFwiLFxyXG4gICAgc3VibWl0QnRuU2VsZWN0b3I6IFwiLnBvcHVwX19zdWJtaXQtYnRuXCIsXHJcbiAgICBpbmFjdGl2ZUJ0bkNsYXNzOiBcImJ1dHRvbl9pbmFjdGl2ZVwiLFxyXG4gICAgaW5wdXRFcnJDbGFzczogXCJwb3B1cF9faW5wdXQtdGV4dF90eXBlX2Vycm9yXCIsXHJcbiAgICBpbnB1dEVyckFjdGl2ZUNsYXNzOiBcInBvcHVwX19pbnB1dC10ZXh0LWVycm9yX2FjdGl2ZVwiXHJcbiAgfVxyXG5cclxuLyoqIG1haW4gYnV0dG9ucyAqL1xyXG5leHBvcnQgY29uc3QgcHJvZmlsZUVkaXRCdG4gICAgICAgID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcImJ1dHRvbi5wcm9maWxlX19lZGl0LWJ0blwiKTtcclxuZXhwb3J0IGNvbnN0IG9wZU5ld0NhcmRQb3B1cEJ0biAgICA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCJidXR0b24ucHJvZmlsZV9fYWRkLWJ0blwiKTtcclxuXHJcbi8qKiBwcm9maWxlIGRhdGEgZWxlbWVudHMgKi9cclxuZXhwb3J0IGNvbnN0IHByb2ZpbGVOYW1lICAgICAgICAgICA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fbmFtZVwiKTtcclxuZXhwb3J0IGNvbnN0IHByb2ZpbGVBYm91dE1lICAgICAgICA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fYWJvdXQtbWVcIik7XHJcblxyXG4vKiogZ2FsbGVyeSBjb250YWluZXIgKi9cclxuY29uc3QgY29udGFpbmVyICAgICAgICAgICAgICAgICAgICAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmdhbGxlcnlcIik7XHJcbmV4cG9ydCBjb25zdCBnYWxsZXJ5TGlzdENvbnRhaW5lciAgID0gY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoXCIuZ2FsbGVyeV9fbGlzdFwiKTtcclxuXHJcbi8qKiBwcm9maWxlIHBvcHVwIGVsZW1lbnRzICovXHJcbmNvbnN0IHByb2ZpbGVGb3JtICAgICAgICAgICAgICAgICAgPSBkb2N1bWVudC5mb3Jtcy5wcm9maWxlZm9ybTtcclxuZXhwb3J0IGNvbnN0IGlucHV0TmFtZSAgICAgICAgICAgICA9IHByb2ZpbGVGb3JtLmVsZW1lbnRzLnByb2ZpbGVOYW1lO1xyXG5leHBvcnQgY29uc3QgaW5wdXRBYm91dE1lICAgICAgICAgID0gcHJvZmlsZUZvcm0uZWxlbWVudHMucHJvZmlsZUFib3V0TWU7XHJcbmV4cG9ydCBjb25zdCBwbGFjZUZvcm0gICAgICAgICAgICAgPSBkb2N1bWVudC5mb3Jtcy5wbGFjZWZvcm07XHJcbiIsImltcG9ydCBcIi4vcGFnZXMvaW5kZXguY3NzXCI7XHJcbmltcG9ydCBTZWN0aW9uIGZyb20gXCIuL2NvbXBvbmVudHMvU2VjdGlvbi5qc1wiO1xyXG5pbXBvcnQgQ2FyZCBmcm9tIFwiLi9jb21wb25lbnRzL0NhcmQuanNcIjtcclxuaW1wb3J0IFBvcHVwV2l0aEZvcm0gZnJvbSBcIi4vY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzXCI7XHJcbmltcG9ydCBQb3B1cFdpdGhJbWFnZSBmcm9tICBcIi4vY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qc1wiO1xyXG5pbXBvcnQgVXNlckluZm8gZnJvbSBcIi4vY29tcG9uZW50cy9Vc2VySW5mby5qc1wiO1xyXG5pbXBvcnQgRm9ybVZhbGlkYXRvciBmcm9tIFwiLi9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanNcIjtcclxuaW1wb3J0ICogYXMgY29uc3RhbnRzIGZyb20gXCIuL3V0aWxzL2NvbnN0YW50cy5qc1wiXHJcblxyXG5cclxuLyoqXHJcbiAqIGdlbmVyYXRlIGEgZ2FsbGVyeSBDYXJkcyBmcm9tIGluaXRpYWxDYXJkcyBpbml0aWFsIGNvbnN0XHJcbiAqL1xyXG5jb25zdCBjYXJkTGlzdCA9IG5ldyBTZWN0aW9uKHtcclxuICBkYXRhOiBjb25zdGFudHMuaW5pdGlhbENhcmRzLFxyXG4gIHJlbmRlcmVyOiBhZGRHYWxsZXJ5Q2FyZEl0ZW1cclxufSwgY29uc3RhbnRzLmdhbGxlcnlMaXN0Q29udGFpbmVyKTtcclxuXHJcbmZ1bmN0aW9uICBhZGRHYWxsZXJ5Q2FyZEl0ZW0gKGl0ZW0pIHtcclxuICBjb25zdCBjYXJkID0gbmV3IENhcmQoaXRlbSwgXHJcbiAgICBcIiNnYWxsZXJ5LWl0ZW0tdGVtcGxhdGVcIixcclxuICAgICgpID0+IHtcclxuICAgICAgY29uc3QgcG9wdXAgPSBuZXcgUG9wdXBXaXRoSW1hZ2Uoe3NyYyA6IGl0ZW0ubGluayAsIHRpdGxlOiBpdGVtLm5hbWV9LCBcIi5wb3B1cF90eXBlX2ltZ1wiKTtcclxuICAgICAgcG9wdXAub3BlbigpO1xyXG4gICAgfSk7XHJcbiAgY29uc3QgY2FyZEVsZW1lbnQgPSBjYXJkLmdlbmVyYXRlQ2FyZCgpO1xyXG4gIGNhcmRMaXN0LmFkZEl0ZW0oY2FyZEVsZW1lbnQpO1xyXG59XHJcbiBcclxuLyoqXHJcbiAqIGFkZCBwb3B1cCB3aXRoIGZvcm0gdG8gYWRkIG5ldyBjYXJkIGl0ZW0gdG8gZ2FsbGVyeVxyXG4gKi9cclxuY29uc3QgbmV3Q2FyZFBvcHVwID0gbmV3IFBvcHVwV2l0aEZvcm0gKFxyXG4gIFwiLnBvcHVwX3R5cGVfbmV3LWNhcmRcIixcclxuICBoYW5kbGVDcmVhdGVOZXdDYXJkXHJcbik7XHJcblxyXG5mdW5jdGlvbiBoYW5kbGVDcmVhdGVOZXdDYXJkIChpbnB1dHMpIHtcclxuICBhZGRHYWxsZXJ5Q2FyZEl0ZW0oe2xpbms6IGlucHV0cy5wbGFjZUltYWdlTGluaywgbmFtZTogaW5wdXRzLnBsYWNlTmFtZX0pO1xyXG4gIGNvbnN0YW50cy5wbGFjZUZvcm0ucmVzZXQoKTtcclxuICBuZXdDYXJkUG9wdXAuY2xvc2UoKTtcclxuICBuZXdDYXJkVmFsaWRhdG9yLnRvZ2dsZUJ1dHRvblN0YXRlKCk7XHJcbn1cclxuXHJcbmNvbnN0YW50cy5vcGVOZXdDYXJkUG9wdXBCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IG5ld0NhcmRQb3B1cC5vcGVuKCkpO1xyXG5cclxuLyoqXHJcbiAqIGFkZCBwb3B1cCB3aXRoIGZvcm0gdG8gZWRpdCBtYWluIHVzZXIgaW5mb1xyXG4gKi9cclxuY29uc3QgdXNlckluZm8gID0gbmV3IFVzZXJJbmZvKFwiLnByb2ZpbGVfX25hbWVcIixcIi5wcm9maWxlX19hYm91dC1tZVwiKTtcclxuXHJcbmNvbnN0IHByb2ZpbGVQb3B1cCA9IG5ldyBQb3B1cFdpdGhGb3JtIChcclxuICBcIi5wb3B1cF90eXBlX3Byb2ZpbGVcIixcclxuICAgaGFuZGxlUHJvZmlsZUZvcm1TdWJtaXRcclxuKTtcclxuXHJcbmZ1bmN0aW9uIGhhbmRsZVByb2ZpbGVGb3JtU3VibWl0IChpbnB1dHMpIHtcclxuICB1c2VySW5mby5zZXRVc2VySW5mbyh7bmFtZTogaW5wdXRzLnByb2ZpbGVOYW1lLCBqb2I6IGlucHV0cy5wcm9maWxlQWJvdXRNZX0pXHJcbiAgcHJvZmlsZVZhbGlkYXRvci50b2dnbGVCdXR0b25TdGF0ZSgpO1xyXG59XHJcblxyXG5jb25zdGFudHMucHJvZmlsZUVkaXRCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICBjb25zdCB7bmFtZSwgam9iIH0gPSB1c2VySW5mby5nZXRVc2VySW5mbygpO1xyXG4gIGNvbnN0YW50cy5pbnB1dE5hbWUudmFsdWUgID0gbmFtZTtcclxuICBjb25zdGFudHMuaW5wdXRBYm91dE1lLnZhbHVlICA9IGpvYjtcclxuICBwcm9maWxlUG9wdXAub3BlbigpO1xyXG59KTtcclxuXHJcblxyXG4vKipcclxuICogYWRkIGZvcm0gdmFsaWRhdGlvbiBmb3IgYWxsIGZvcm1zXHJcbiAqL1xyXG5jb25zdCBuZXdDYXJkVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IoY29uc3RhbnRzLmNvbmZpZyxcIi5wb3B1cF9fZm9ybV90eXBlX25ldy1jYXJkXCIpO1xyXG5uZXdDYXJkVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcclxuXHJcbmNvbnN0IHByb2ZpbGVWYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihjb25zdGFudHMuY29uZmlnLFwiLnBvcHVwX19mb3JtX3R5cGVfcHJvZmlsZVwiKTtcclxucHJvZmlsZVZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XHJcblxyXG4vKipcclxuICogcmVuZGVyIHRoZSBnZW5lcmF0ZWQgZ2FsbGVyeSBDYXJkcyBcclxuICovXHJcbmNhcmRMaXN0LnJlbmRlcmVyKCk7XHJcblxyXG5cclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgU2VjdGlvbiB7XHJcbiAgICBjb25zdHJ1Y3Rvcih7IGRhdGEsIHJlbmRlcmVyIH0sIGNvbnRhaW5lclNlbGVjdG9yKSB7XHJcbiAgICAgICAgdGhpcy5faXRlbXMgPSBkYXRhLFxyXG4gICAgICAgIHRoaXMuX3JlbmRlcmVyID0gcmVuZGVyZXI7XHJcbiAgICAgICAgdGhpcy5fY29udGFpbmVyID0gY29udGFpbmVyU2VsZWN0b3I7XHJcbiAgICB9XHJcblxyXG4gICAgYWRkSXRlbShlbGVtZW50KSB7XHJcbiAgICAgICAgdGhpcy5fY29udGFpbmVyLmFwcGVuZChlbGVtZW50KTtcclxuICAgICAgfVxyXG4gICAgXHJcbiAgICAgIHJlbmRlcmVyKCkge1xyXG4gICAgICAgIHRoaXMuX2l0ZW1zLmZvckVhY2goaXRlbSA9PiB7XHJcbiAgICAgICAgICB0aGlzLl9yZW5kZXJlcihpdGVtKTtcclxuICAgICAgICB9KTtcclxuICAgICAgfVxyXG5cclxufSIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFVzZXJJbmZvIHtcclxuICAgIC8qKlxyXG4gICAgICogVGhlIFVzZXJJbmZvIGNsYXNzIGlzIHJlc3BvbnNpYmxlIGZvciByZW5kZXJpbmcgXHJcbiAgICAgKiBpbmZvcm1hdGlvbiBhYm91dCB0aGUgdXNlciBvbiB0aGUgcGFnZS4gVGhpcyBjbGFzcyBzaG91bGQ6XHJcbiAgICAgKiAtVGFrZSBhbiBvYmplY3Qgd2l0aCB0aGUgc2VsZWN0b3JzIG9mIHR3byBlbGVtZW50cyBpbnRvIHRoZSBjb25zdHJ1Y3RvcjogXHJcbiAgICAgKiBvbmUgY29udGFpbmluZyB0aGUgdXNlcidzIG5hbWUsIGFuZCBhbm90aGVyIGNvbnRhaW5pbmcgdGhlIHVzZXIncyBqb2IuXHJcbiAgICAgKi9cclxuICAgIGNvbnN0cnVjdG9yIChuYW1lU2VsZWN0b3IsIGpvYlNlbGVjdG9yKSB7XHJcbiAgICAgICAgdGhpcy5fbmFtZUVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKG5hbWVTZWxlY3Rvcik7XHJcbiAgICAgICAgdGhpcy5fam9iRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioam9iU2VsZWN0b3IpO1xyXG5cclxuICAgIH1cclxuXHJcbiAgICBnZXRVc2VySW5mbygpIHtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiByZXR1cm5zIGFuIG9iamVjdCB3aXRoIGluZm9ybWF0aW9uIGFib3V0IHRoZSB1c2VyLiBcclxuICAgICAgICAgKiBUaGlzIG1ldGhvZCB3aWxsIGJlIGhhbmR5IGZvciBcclxuICAgICAgICAgKiBjYXNlcyB3aGVuIGl0J3MgbmVjZXNzYXJ5IHRvIGRpc3BsYXkgdGhlIHVzZXIgZGF0YSBpbiB0aGUgb3BlbiBmb3JtLlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIG5hbWU6IHRoaXMuX25hbWVFbGVtZW50LnRleHRDb250ZW50LFxyXG4gICAgICAgICAgICBqb2I6IHRoaXMuX2pvYkVsZW1lbnQudGV4dENvbnRlbnRcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgc2V0VXNlckluZm8oe25hbWUsIGpvYn0pe1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIHRha2VzIG5ldyB1c2VyIGRhdGEgYW5kIGFkZHMgaXQgb24gdGhlIHBhZ2UuXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdGhpcy5fbmFtZUVsZW1lbnQudGV4dENvbnRlbnQgPSBuYW1lO1xyXG4gICAgICAgIHRoaXMuX2pvYkVsZW1lbnQudGV4dENvbnRlbnQgPSBqb2I7XHJcbiAgICB9XHJcbn0iXSwibmFtZXMiOlsiQ2FyZCIsImNvbnN0cnVjdG9yIiwiZGF0YSIsImNhcmRTZWxlY3RvciIsImhhbmRsZUNhcmRDbGljayIsInRoaXMiLCJfZWxlbWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJjbGFzc0xpc3QiLCJ0b2dnbGUiLCJyZW1vdmUiLCJfdGV4dCIsIm5hbWUiLCJfaW1nIiwibGluayIsIl9jYXJkU2VsZWN0b3IiLCJfaGFuZGxlQ2FyZENsaWNrIiwiX2dldFRlbXBsYXRlIiwiZG9jdW1lbnQiLCJjb250ZW50IiwiY2xvbmVOb2RlIiwiZ2VuZXJhdGVDYXJkIiwic3JjIiwidGV4dENvbnRlbnQiLCJfc2V0RXZlbnRMaXN0ZW5lcnMiLCJhZGRFdmVudExpc3RlbmVyIiwiX2hhbmRsZUxpa2VCdG4iLCJfaGFuZGxlRGVsZXRlR2FsbGVyeUNhcmRJdGVtIiwiUG9wdXAiLCJwb3B1cFNlbGVjdG9yIiwiZXZ0Iiwia2V5IiwiY2xvc2UiLCJ0YXJnZXQiLCJjb250YWlucyIsIl9wb3B1cCIsInJlbW92ZUV2ZW50TGlzdGVuZXJzIiwib3BlbiIsImFkZCIsInNldEV2ZW50TGlzdGVuZXJzIiwiX2hhbmRsZUVzY0Nsb3NlIiwiX2hhbmRsZUNsaWNrQ2xvc2VQb3B1cCIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJQb3B1cFdpdGhGb3JtIiwiZm9ybVN1Ym1pdCIsInN1cGVyIiwicHJldmVudERlZmF1bHQiLCJpbnB1dHMiLCJfZ2V0SW5wdXRWYWx1ZXMiLCJfZm9ybVN1Ym1pdCIsIl9mb3JtRWxlbWV0IiwiaW5wdXRWYWx1ZXMiLCJxdWVyeVNlbGVjdG9yQWxsIiwiZm9yRWFjaCIsImlucHV0IiwidmFsdWUiLCJfaGFuZGxlUHJvZmlsZUZvcm1TdWJtaXQiLCJyZXNldCIsIlBvcHVwV2l0aEltYWdlIiwidGl0bGUiLCJfc3JjIiwiX3RpdGxlIiwiYWx0IiwiRm9ybVZhbGlkYXRvciIsImNvbmZpZyIsImZvcm1FbCIsIl9mb3JtU2VsZWN0b3IiLCJmb3JtU2VsZWN0b3IiLCJfZm9ybUlucHV0c0ZpZWxkU2V0IiwiZm9ybUlucHV0c0ZpZWxkU2V0IiwiX2lucHV0U2VsZWN0b3IiLCJpbnB1dFNlbGVjdG9yIiwiX3N1Ym1pdEJ0blNlbGVjdG9yIiwic3VibWl0QnRuU2VsZWN0b3IiLCJfaW5hY3RpdmVCdG5DbGFzcyIsImluYWN0aXZlQnRuQ2xhc3MiLCJfaW5wdXRFcnJDbGFzcyIsImlucHV0RXJyQ2xhc3MiLCJfaW5wdXRFcnJBY3RpdmVDbGFzcyIsImlucHV0RXJyQWN0aXZlQ2xhc3MiLCJfZm9ybUVsIiwiX3Nob3dJbnB1dEVyciIsImlucHV0RWwiLCJlcnJFbCIsImlkIiwidmFsaWRhdGlvbk1lc3NhZ2UiLCJfaGlkZUlucHV0RXJyb3IiLCJfY2hlY2tJbnB1dFZhbGlkaXR5IiwidmFsaWRpdHkiLCJ2YWxpZCIsIl9oYXNJbnZhbGlkSW5wdXQiLCJpbnB1dExzdCIsInNvbWUiLCJ0b2dnbGVCdXR0b25TdGF0ZSIsIkFycmF5IiwiZnJvbSIsImJ0bkVsIiwiZGlzYWJsZWQiLCJlbmFibGVWYWxpZGF0aW9uIiwicHJvZmlsZUVkaXRCdG4iLCJvcGVOZXdDYXJkUG9wdXBCdG4iLCJnYWxsZXJ5TGlzdENvbnRhaW5lciIsInByb2ZpbGVGb3JtIiwiZm9ybXMiLCJwcm9maWxlZm9ybSIsImlucHV0TmFtZSIsImVsZW1lbnRzIiwicHJvZmlsZU5hbWUiLCJpbnB1dEFib3V0TWUiLCJwcm9maWxlQWJvdXRNZSIsInBsYWNlRm9ybSIsInBsYWNlZm9ybSIsImNhcmRMaXN0IiwiY29udGFpbmVyU2VsZWN0b3IiLCJyZW5kZXJlciIsIl9pdGVtcyIsIl9yZW5kZXJlciIsIl9jb250YWluZXIiLCJhZGRJdGVtIiwiZWxlbWVudCIsImFwcGVuZCIsIml0ZW0iLCJhZGRHYWxsZXJ5Q2FyZEl0ZW0iLCJjb25zdGFudHMiLCJjYXJkRWxlbWVudCIsIm5ld0NhcmRQb3B1cCIsInBsYWNlSW1hZ2VMaW5rIiwicGxhY2VOYW1lIiwibmV3Q2FyZFZhbGlkYXRvciIsInVzZXJJbmZvIiwibmFtZVNlbGVjdG9yIiwiam9iU2VsZWN0b3IiLCJfbmFtZUVsZW1lbnQiLCJfam9iRWxlbWVudCIsImdldFVzZXJJbmZvIiwiam9iIiwic2V0VXNlckluZm8iLCJwcm9maWxlUG9wdXAiLCJwcm9maWxlVmFsaWRhdG9yIl0sInNvdXJjZVJvb3QiOiIifQ==